<html>

<head>
    <title>Services Monitoring</title>
    </style>
</head>

<body>
    <table style="width: 60%; margin: auto">
        <tbody>
            <tr>
                <td></td>
                <td style="text-align:center"><textarea rows="5" cols="60" id="service0"></textarea><label
                        for="service0">refdata/version</label>
                </td>
                <td style="text-align:center"><textarea rows="5" cols="60" id="service1"></textarea><label
                        for="service1">ibonus/version</label>
                </td>
                <td style="text-align:center"><textarea rows="5" cols="60" id="service2"></textarea><label
                        for="service2">catalog/catalog</label>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>refdata</td>
                <td>ibonus</td>
                <td>catalog</td>
            </tr>
            <tr>
                <td>Имя сервиса:</td>
                <td>iToolsCore</td>
                <td>ibonusAPI</td>
                <td>Catalog</td>
            </tr>
            <tr>
                <td>Доступен: </td>
                <td id="ia0">&nbsp;</td>
                <td id="ia1">&nbsp;</td>
                <td id="ia2">&nbsp;</td>
            </tr>
            <tr>
                <td>Время ответа(ms): </td>
                <td id="rd0">&nbsp;</td>
                <td id="rd1">&nbsp;</td>
                <td id="rd2">&nbsp;</td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <p><input type="button" value="Получить дополнительную информацию" onclick="asd(1, 0)">
                        <input type="button" value="Скрыть" onclick="asd(0, 0)"></p>
                </td>
                <td>
                    <p><input type="button" value="Получить дополнительную информацию" onclick="asd(1, 1)">
                        <input type="button" value="Скрыть" onclick="asd(0, 1)"></p>
                </td>
                <td>
                    <p><input type="button" value="Получить дополнительную информацию" onclick="asd(1, 2)">
                        <input type="button" value="Скрыть" onclick="asd(0, 2)"></p>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <p>
                        <form id="asd0" action="">
                            <h1>HII insert some data</h1>
                        </form>
                    </p>
                </td>
                <td>
                    <p>
                        <form id="asd1" action="">
                            <h1>HII insert some data</h1>
                        </form>
                    </p>
                </td>
                <td>
                    <p>
                        <form id="asd2" action="">
                            <h1>HII insert some data</h1>
                        </form>
                    </p>
                </td>
            </tr>
        </tbody>
    </table>

</body>
<script>
    window.addEventListener('load', callMethods, false);
    function callMethods() {

        document.getElementById("asd0").style.display = "none";
        document.getElementById("asd1").style.display = "none";
        document.getElementById("asd2").style.display = "none";

        for (var i = 0; i < 3; i++) {
            var response = callService(i);
        }
    };

    function callService(id) {
        var url = "https://localhost:44339/api/values/GetStatus?serviceId=" + id;
        var method = 'GET';
        var shouldBeAsync = true;
        var oXHR = new XMLHttpRequest();

        function append() {
            if (oXHR.status == 200) {
                var result = JSON.parse(oXHR.responseText);
                document.getElementById('service' + id).value = oXHR.responseText;
                insertText(result, id);
            }
        }

        oXHR.onreadystatechange = append;
        oXHR.open(method, url, shouldBeAsync);
        oXHR.setRequestHeader("Content-Type", "application/json");
        oXHR.send();
    };

    function insertText(text, id) {
        document.getElementById('ia' + id).firstChild.data = text.IsAvailable;
        document.getElementById('rd' + id).firstChild.data = text.ResponseDuration;
    }

    function asd(a, id) {

        if (a == 1) {
            document.getElementById("asd" + id).style.display = "block";
        } else {
            document.getElementById("asd" + id).style.display = "none";
        }
    };
</script>

</html>